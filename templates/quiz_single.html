<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="quiz-page">
    
    <div class="quiz-container">
        üë§ ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: {{ session['player_name'] }}
        <h2>‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥: <span class="highlight">{{ word }}</span></h2>
    <div id="timer" style="font-size: 24px; color: red; margin-bottom: 10px;">
  <span id="time-display">--:--</span>
</div>

        <p class="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: {{ score }}/{{ total }}</p>
        
        <div class="progress-container">

        <div class="progress-bar" style="width: {{ (count / total) * 100 }}%"></div>
        
        </div>
        <div id="correct-banner" class="correct-banner"> 
             <span class="checkmark"></span> ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!
        </div>
        <audio id="correct-sound" src="{{ url_for('static', filename='correct.mp3') }}"></audio>
        
        <div class="video-frame">
            <img src="{{ url_for('video_feed') }}" width="640" height="480">
        </div>

       <form action="{{ url_for('next_quiz') }}" method="get" style="text-align: center; margin-top: 20px;">
    <button type="submit" class="next-btn">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    <p style="color: gray; font-size: 14px; margin-top: 8px;">
        ‚ö†Ô∏è <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏´‡∏≤‡∏Å‡∏Å‡∏î ‚Äú‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‚Äù‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡πç‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ <span style="color: red;">‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span> ‡∏Ñ‡∏≥‡∏ô‡∏±‡πâ‡∏ô
    </p>
</form>

    </div>
   <script>
let totalSeconds;



if (localStorage.getItem('quizTimeLeft')) {
    totalSeconds = parseInt(localStorage.getItem('quizTimeLeft'));
} else {
    totalSeconds = 120; 
}


let timerElement = document.getElementById('time-display');

function updateTimer() {
    let minutes = Math.floor(totalSeconds / 60);
    let seconds = totalSeconds % 60;
    timerElement.textContent = `‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠
    localStorage.setItem('quizTimeLeft', totalSeconds);

    if (totalSeconds <= 0) {
        clearInterval(timerInterval);
        localStorage.removeItem('quizTimeLeft');
        alert("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡∏à‡∏∞‡πÑ‡∏õ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞");
        window.location.href = "/summary";
    }

    totalSeconds--;
}

let timerInterval = setInterval(updateTimer, 1000);


if (window.location.pathname === "/summary" || window.location.pathname === "/") {
    localStorage.removeItem('quizTimeLeft');
}


window.onload = function () {
    {% if correct_answered %}
    const banner = document.getElementById("correct-banner");
    banner.classList.add("show");
    document.getElementById("correct-sound").play();
    setTimeout(() => {
        banner.classList.remove("show");
    }, 1500);
    {% endif %}
}
</script>

    
        
      
</body>
</html>
